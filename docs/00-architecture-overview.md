# Ringmaster Architecture Overview

## Executive Summary

Ringmaster is a **single Rust binary** SDLC orchestration platform that combines visual Kanban task management with autonomous AI coding loops. It manages the complete software development lifecycle from code generation through production deployment, with recursive LLM prompt processing and full CI/CD integration.

## Core Design Principle: Heuristic Orchestration + LLM Execution

**Ringmaster uses heuristics for orchestration and LLMs for code generation.**

### Key Term: RLM (Recursive Language Model)

A context summarization technique that condenses long content (like chat history) so the code generation LLM has relevant context to either act directly or spawn child agents for supplemental research.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ARCHITECTURE                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚              ORCHESTRATION LAYER (Heuristic-Based)                           â”‚    â”‚
â”‚   â”‚                                                                              â”‚    â”‚
â”‚   â”‚  â€¢ State machine transitions   â†’ Rule-based lookup tables                    â”‚    â”‚
â”‚   â”‚  â€¢ Loop stop conditions        â†’ Configurable numeric thresholds             â”‚    â”‚
â”‚   â”‚  â€¢ Error recovery routing      â†’ Deterministic state mapping                 â”‚    â”‚
â”‚   â”‚  â€¢ Build/deploy status         â†’ String pattern matching                     â”‚    â”‚
â”‚   â”‚                                                                              â”‚    â”‚
â”‚   â”‚  âš¡ Fast, predictable, no API calls                                          â”‚    â”‚
â”‚   â”‚                                                                              â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚                                            â”‚
â”‚                                          â–¼                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚              PROMPT ASSEMBLY (Heuristic + RLM)                                â”‚    â”‚
â”‚   â”‚                                                                              â”‚    â”‚
â”‚   â”‚  Assembled in order:                                                         â”‚    â”‚
â”‚   â”‚  1. System Prompt (static)                                                   â”‚    â”‚
â”‚   â”‚  2. Coding Agent Prompt (stage-specific)                                     â”‚    â”‚
â”‚   â”‚  3. Card Chat History (RLM summarized if too long)                           â”‚    â”‚
â”‚   â”‚  4. Other Context (notes, ADRs, libraries, source files, logs)               â”‚    â”‚
â”‚   â”‚                                                                              â”‚    â”‚
â”‚   â”‚  ğŸ“‹ Heuristic assembly with RLM for long content summarization               â”‚    â”‚
â”‚   â”‚                                                                              â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                          â”‚                                            â”‚
â”‚                                          â–¼                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚              CODE GENERATION LLM                                             â”‚    â”‚
â”‚   â”‚                                                                              â”‚    â”‚
â”‚   â”‚  With assembled context, the LLM can:                                        â”‚    â”‚
â”‚   â”‚  â€¢ Act directly - generate code, fix bugs, implement features                â”‚    â”‚
â”‚   â”‚  â€¢ Spawn child agents - conduct supplemental research if needed              â”‚    â”‚
â”‚   â”‚                                                                              â”‚    â”‚
â”‚   â”‚  ğŸš€ Uses capable models (Opus/Sonnet) for quality output                     â”‚    â”‚
â”‚   â”‚                                                                              â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This architecture ensures:
- **Predictability**: Orchestration decisions follow explicit rules (no LLM variability)
- **Relevant context**: RLM summarizes long history so LLM has what it needs
- **Flexibility**: LLM can spawn child agents for research when context is insufficient
- **Reliability**: Core orchestration continues even during LLM API degradation

See [09-heuristic-orchestration.md](./09-heuristic-orchestration.md) for detailed explanation.

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    RINGMASTER                                          â”‚
â”‚                              (Single Rust Binary)                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     Terminal Layer      â”‚     â”‚              Web Server (Axum)                   â”‚ â”‚
â”‚  â”‚                         â”‚     â”‚                                                  â”‚ â”‚
â”‚  â”‚  â€¢ Colored event logs   â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â€¢ Loop iteration       â”‚     â”‚  â”‚   REST API      â”‚  â”‚   WebSocket Server    â”‚ â”‚ â”‚
â”‚  â”‚    status               â”‚     â”‚  â”‚   /api/*        â”‚  â”‚   /api/ws             â”‚ â”‚ â”‚
â”‚  â”‚  â€¢ Error notifications  â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚  â€¢ Web UI URL           â”‚     â”‚                                                  â”‚ â”‚
â”‚  â”‚                         â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚  â”‚          Embedded React Frontend            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  tracing +      â”‚    â”‚     â”‚  â”‚          (rust-embed static files)          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  tracing-sub    â”‚    â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚                                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                Core Services Layer                                    â”‚
â”‚                                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Card State        â”‚  â”‚  Ralph Loop        â”‚  â”‚  Recursive Prompt Pipeline     â”‚  â”‚
â”‚  â”‚  Machine           â”‚  â”‚  Manager           â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚                    â”‚  â”‚                    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â€¢ 16 SDLC states  â”‚  â”‚  â€¢ Loop lifecycle  â”‚  â”‚  â”‚ Layer 1: Card Context    â”‚  â”‚  â”‚
â”‚  â”‚  â€¢ Transitions     â”‚  â”‚  â€¢ Pause/Resume    â”‚  â”‚  â”‚ Layer 2: Project Context â”‚  â”‚  â”‚
â”‚  â”‚  â€¢ Guards          â”‚  â”‚  â€¢ Checkpoints     â”‚  â”‚  â”‚ Layer 3: SDLC State      â”‚  â”‚  â”‚
â”‚  â”‚  â€¢ Actions         â”‚  â”‚  â€¢ Cost tracking   â”‚  â”‚  â”‚ Layer 4: Supplemental    â”‚  â”‚  â”‚
â”‚  â”‚                    â”‚  â”‚  â€¢ Circuit breaker â”‚  â”‚  â”‚ Layer 5: Refinement      â”‚  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Git Worktree      â”‚  â”‚  Event Bus         â”‚  â”‚  SQLite Database               â”‚  â”‚
â”‚  â”‚  Manager           â”‚  â”‚                    â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚                    â”‚  â”‚  â€¢ Card events     â”‚  â”‚  â€¢ cards, attempts, errors     â”‚  â”‚
â”‚  â”‚  â€¢ Branch per card â”‚  â”‚  â€¢ Loop events     â”‚  â”‚  â€¢ projects, deployments       â”‚  â”‚
â”‚  â”‚  â€¢ Isolation       â”‚  â”‚  â€¢ Build events    â”‚  â”‚  â€¢ loop_snapshots, metrics     â”‚  â”‚
â”‚  â”‚  â€¢ Merge support   â”‚  â”‚  â€¢ Deploy events   â”‚  â”‚                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              Integration Services Layer                               â”‚
â”‚                                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ GitHub Actions   â”‚  â”‚ ArgoCD           â”‚  â”‚ Kubernetes       â”‚  â”‚ Docker Hub   â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚              â”‚  â”‚
â”‚  â”‚ â€¢ Workflow runs  â”‚  â”‚ â€¢ App status     â”‚  â”‚ â€¢ Pod logs       â”‚  â”‚ â€¢ Image tags â”‚  â”‚
â”‚  â”‚ â€¢ Job logs       â”‚  â”‚ â€¢ Sync trigger   â”‚  â”‚ â€¢ Deploy status  â”‚  â”‚ â€¢ Versions   â”‚  â”‚
â”‚  â”‚ â€¢ Build status   â”‚  â”‚ â€¢ Rollback       â”‚  â”‚ â€¢ Events         â”‚  â”‚ â€¢ Scanning   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚ Claude/LLM API   â”‚  â”‚ Git Operations   â”‚                                          â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚                                          â”‚
â”‚  â”‚ â€¢ Prompt exec    â”‚  â”‚ â€¢ Commits        â”‚                                          â”‚
â”‚  â”‚ â€¢ Token tracking â”‚  â”‚ â€¢ Branches       â”‚                                          â”‚
â”‚  â”‚ â€¢ Cost calc      â”‚  â”‚ â€¢ Worktrees      â”‚                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚                                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚      External Systems        â”‚
                          â”‚                              â”‚
                          â”‚  â€¢ GitHub (API + Webhooks)   â”‚
                          â”‚  â€¢ ArgoCD (via argocd-proxy) â”‚
                          â”‚  â€¢ Kubernetes Cluster        â”‚
                          â”‚  â€¢ Docker Hub Registry       â”‚
                          â”‚  â€¢ Claude API (Anthropic)    â”‚
                          â”‚  â€¢ Git Repositories          â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Core Components

### 1. Card State Machine
The central orchestrator that tracks each task through the complete SDLC. See [01-state-machine.md](./01-state-machine.md) for details.

### 2. Ralph Loop Manager
Manages autonomous coding loops that iterate until task completion. See [03-loop-manager.md](./03-loop-manager.md) for details.

### 3. Recursive Prompt Pipeline
Enriches prompts through 5 abstraction layers before LLM execution. See [02-prompt-pipeline.md](./02-prompt-pipeline.md) for details.

### 4. Integration Services
Connects to external systems for CI/CD monitoring. See [04-integrations.md](./04-integrations.md) for details.

## Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              MAIN DATA FLOW                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. CARD CREATION
   User (Web UI) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                                              â”‚
        â–¼                                                                              â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   POST /api/cards   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   INSERT   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚  React UI   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚  Axum API   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚  SQLite DB      â”‚ â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                                    â”‚                                         â”‚
        â”‚                                    â–¼                                         â”‚
        â”‚                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
        â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  WebSocket  â”‚ â—€â”€â”€ card_created event           â”‚
        â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
                                                                                       â”‚
2. LOOP EXECUTION                                                                      â”‚
   User clicks "Start Loop"                                                            â”‚
        â”‚                                                                              â”‚
        â–¼                                                                              â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  POST /api/cards/:id/loop/start  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
   â”‚  React UI   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚  Loop Manager       â”‚           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                                                              â”‚                        â”‚
                                                              â–¼                        â”‚
                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                                           â”‚         RALPH LOOP ITERATION          â”‚   â”‚
                                           â”‚                                       â”‚   â”‚
                                           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
                                           â”‚  â”‚  1. Load Card from DB            â”‚  â”‚   â”‚
                                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
                                           â”‚                  â”‚                    â”‚   â”‚
                                           â”‚                  â–¼                    â”‚   â”‚
                                           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
                                           â”‚  â”‚  2. Process through Prompt      â”‚  â”‚   â”‚
                                           â”‚  â”‚     Pipeline (5 layers)         â”‚  â”‚   â”‚
                                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
                                           â”‚                  â”‚                    â”‚   â”‚
                                           â”‚                  â–¼                    â”‚   â”‚
                                           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
                                           â”‚  â”‚  3. Call Claude API             â”‚  â”‚   â”‚
                                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
                                           â”‚                  â”‚                    â”‚   â”‚
                                           â”‚                  â–¼                    â”‚   â”‚
                                           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
                                           â”‚  â”‚  4. Execute Response            â”‚  â”‚   â”‚
                                           â”‚  â”‚     (code changes, git ops)     â”‚  â”‚   â”‚
                                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
                                           â”‚                  â”‚                    â”‚   â”‚
                                           â”‚                  â–¼                    â”‚   â”‚
                                           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
                                           â”‚  â”‚  5. Check Completion            â”‚  â”‚   â”‚
                                           â”‚  â”‚     <promise>COMPLETE</promise> â”‚  â”‚   â”‚
                                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
                                           â”‚                  â”‚                    â”‚   â”‚
                                           â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
                                           â”‚         â”‚                 â”‚           â”‚   â”‚
                                           â”‚     Complete          Continue       â”‚   â”‚
                                           â”‚         â”‚                 â”‚           â”‚   â”‚
                                           â”‚         â–¼                 â–¼           â”‚   â”‚
                                           â”‚    Next State        Loop Again      â”‚   â”‚
                                           â”‚                                       â”‚   â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                                              â”‚                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
        â”‚                                                                              â”‚
        â–¼                                                                              â”‚
   Real-time WebSocket broadcasts:                                                     â”‚
   â€¢ loop_iteration { cardId, iteration, cost, tokens }                               â”‚
   â€¢ attempt_completed { attempt }                                                     â”‚
   â€¢ error_detected { error }                                                          â”‚
   â€¢ state_changed { cardId, from, to }                                               â”‚
                                                                                       â”‚
3. BUILD & DEPLOY MONITORING                                                           â”‚
                                                                                       â”‚
   Card reaches BUILD_QUEUE state                                                      â”‚
        â”‚                                                                              â”‚
        â–¼                                                                              â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
   â”‚  Integration Monitor (background task)                                       â”‚    â”‚
   â”‚                                                                              â”‚    â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚    â”‚
   â”‚  â”‚ GitHub Actions   â”‚â—€â”€â”€â”€â”€ Poll every 10s for workflow runs                  â”‚    â”‚
   â”‚  â”‚ Service          â”‚â”€â”€â”€â”€â–¶ On completion: emit build_status event            â”‚    â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚    â”‚
   â”‚           â”‚                                                                  â”‚    â”‚
   â”‚           â–¼                                                                  â”‚    â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚    â”‚
   â”‚  â”‚ State Machine    â”‚ â—€â”€â”€ BUILD_SUCCESS or BUILD_FAILED                      â”‚    â”‚
   â”‚  â”‚ Transition       â”‚                                                        â”‚    â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚    â”‚
   â”‚           â”‚                                                                  â”‚    â”‚
   â”‚           â–¼                                                                  â”‚    â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚    â”‚
   â”‚  â”‚ ArgoCD Service   â”‚â—€â”€â”€â”€â”€ Monitor sync status                               â”‚    â”‚
   â”‚  â”‚                  â”‚â”€â”€â”€â”€â–¶ On sync: emit deploy_status event                 â”‚    â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚    â”‚
   â”‚           â”‚                                                                  â”‚    â”‚
   â”‚           â–¼                                                                  â”‚    â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚    â”‚
   â”‚  â”‚ Kubernetes       â”‚â—€â”€â”€â”€â”€ Monitor pod status, collect logs                  â”‚    â”‚
   â”‚  â”‚ Service          â”‚â”€â”€â”€â”€â–¶ On error: trigger ERROR_FIXING state              â”‚    â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚    â”‚
   â”‚                                                                              â”‚    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                                                                                       â”‚
4. ERROR RECOVERY (Auto-restart Ralph Loop)                                            â”‚
                                                                                       â”‚
   Error detected (build failure, deploy failure, runtime error)                       â”‚
        â”‚                                                                              â”‚
        â–¼                                                                              â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
   â”‚  State Machine transitions to ERROR_FIXING                                   â”‚    â”‚
   â”‚                                                                              â”‚    â”‚
   â”‚  1. Collect error context:                                                   â”‚    â”‚
   â”‚     â€¢ Build logs from GitHub Actions                                         â”‚    â”‚
   â”‚     â€¢ Pod logs from Kubernetes                                               â”‚    â”‚
   â”‚     â€¢ ArgoCD sync error messages                                             â”‚    â”‚
   â”‚                                                                              â”‚    â”‚
   â”‚  2. Update Card with error history                                           â”‚    â”‚
   â”‚                                                                              â”‚    â”‚
   â”‚  3. Restart Ralph Loop with error context injected                           â”‚    â”‚
   â”‚     (via Supplemental Context layer)                                         â”‚    â”‚
   â”‚                                                                              â”‚    â”‚
   â”‚  4. Loop iterates to fix the error                                           â”‚    â”‚
   â”‚                                                                              â”‚    â”‚
   â”‚  5. On success: transition back to appropriate state                         â”‚    â”‚
   â”‚                                                                              â”‚    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Interaction Matrix

| Component | Interacts With | Interaction Type |
|-----------|----------------|------------------|
| **Card State Machine** | Database, Loop Manager, Event Bus | State changes, triggers loops, emits events |
| **Loop Manager** | Prompt Pipeline, LLM Service, Git Service, State Machine | Orchestrates loop iterations |
| **Prompt Pipeline** | Database, File System, Integration Services | Reads context, enriches prompts |
| **Integration Services** | External APIs, Event Bus | Polls status, emits events |
| **Event Bus** | WebSocket Server, Terminal Logger | Broadcasts events to subscribers |
| **Web Server** | Database, All Services | API gateway for UI operations |
| **React Frontend** | Web Server, WebSocket | User interface, real-time updates |

## Technology Choices

| Layer | Technology | Justification |
|-------|------------|---------------|
| **Language** | Rust | Single binary, memory safety, async performance |
| **Web Framework** | Axum | Tower ecosystem, WebSocket support, async-native |
| **Database** | SQLite + sqlx | Embedded, compile-time query verification |
| **Frontend** | React + TypeScript + Vite | Rich UI, type safety, fast HMR |
| **State Management** | Zustand | Lightweight, TypeScript-native |
| **Styling** | Tailwind CSS | Utility-first, consistent design |
| **Async Runtime** | Tokio | De facto Rust async standard |
| **Serialization** | Serde | JSON/YAML, ecosystem standard |
| **Git** | git2 (libgit2) | Native bindings, full git support |
| **HTTP Client** | reqwest | Async, TLS, comprehensive |
| **K8s Client** | kube-rs | Native async Kubernetes API |
| **Embedding** | rust-embed | Static file embedding in binary |

## Security Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SECURITY LAYERS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. API Authentication                                           â”‚
â”‚     â€¢ Bearer token for API access                                â”‚
â”‚     â€¢ WebSocket connection authentication                        â”‚
â”‚                                                                  â”‚
â”‚  2. Git Worktree Isolation                                       â”‚
â”‚     â€¢ Each card operates in isolated worktree                    â”‚
â”‚     â€¢ No cross-card file access                                  â”‚
â”‚                                                                  â”‚
â”‚  3. LLM Prompt Guardrails                                        â”‚
â”‚     â€¢ Refinement layer injects safety constraints                â”‚
â”‚     â€¢ Path restrictions in prompts                               â”‚
â”‚     â€¢ No secrets in prompt context                               â”‚
â”‚                                                                  â”‚
â”‚  4. Integration Credentials                                      â”‚
â”‚     â€¢ Environment variables for API tokens                       â”‚
â”‚     â€¢ Read-only ArgoCD access via argocd-proxy                   â”‚
â”‚     â€¢ Kubernetes RBAC for pod log access                         â”‚
â”‚                                                                  â”‚
â”‚  5. Database Security                                            â”‚
â”‚     â€¢ Local SQLite file (no network exposure)                    â”‚
â”‚     â€¢ WAL mode for crash safety                                  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Model

Ringmaster is designed to run inside a user's codespace (GitHub Codespaces, devcontainers, etc.). The codespace provides the security boundary - no built-in authentication is required.

### Prerequisites

- **Claude Code CLI**: Auto-installed on startup if not found. Manual install: `curl -fsSL https://claude.ai/install.sh | bash`
- **Git**: Required for worktree management

### CLI Commands

```bash
ringmaster                    # Start server (default: localhost:8080)
ringmaster --port 3000        # Custom port
ringmaster config             # Show configuration
ringmaster doctor             # Check dependencies
ringmaster doctor --install   # Install Claude Code CLI if missing
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CODER INSTANCE DEPLOYMENT                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  $ ./ringmaster                                                   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Terminal Output:                                            â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®â”‚â”‚
â”‚  â”‚  â”‚  RINGMASTER v1.0.0                                        â”‚â”‚â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚â”‚â”‚
â”‚  â”‚  â”‚  Web UI: http://localhost:8080                           â”‚â”‚â”‚
â”‚  â”‚  â”‚  Database: ~/.ringmaster/data.db                          â”‚â”‚â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚â”‚â”‚
â”‚  â”‚  â”‚                                                           â”‚â”‚â”‚
â”‚  â”‚  â”‚  [14:23:01] Card #abc123 state: draft â†’ planning          â”‚â”‚â”‚
â”‚  â”‚  â”‚  [14:23:05] Loop started for card #abc123                 â”‚â”‚â”‚
â”‚  â”‚  â”‚  [14:23:06] Loop #abc123 iteration 1/100                  â”‚â”‚â”‚
â”‚  â”‚  â”‚  [14:23:15] Loop #abc123 iteration 2/100                  â”‚â”‚â”‚
â”‚  â”‚  â”‚  [14:23:25] Card #abc123 state: coding â†’ code_review      â”‚â”‚â”‚
â”‚  â”‚  â”‚  ...                                                      â”‚â”‚â”‚
â”‚  â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  Files:                                                          â”‚
â”‚  ~/.ringmaster/                                                   â”‚
â”‚  â”œâ”€â”€ data.db              (SQLite database)                      â”‚
â”‚  â”œâ”€â”€ config.toml          (Configuration)                        â”‚
â”‚  â””â”€â”€ worktrees/           (Git worktrees per card)               â”‚
â”‚      â”œâ”€â”€ card-abc123/                                            â”‚
â”‚      â”œâ”€â”€ card-def456/                                            â”‚
â”‚      â””â”€â”€ ...                                                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Related Documentation

1. [01-state-machine.md](./01-state-machine.md) - Card lifecycle and state transitions
2. [02-prompt-pipeline.md](./02-prompt-pipeline.md) - Recursive LLM abstraction layers
3. [03-loop-manager.md](./03-loop-manager.md) - Ralph-Wiggum loop implementation
4. [04-integrations.md](./04-integrations.md) - External service integrations
5. [05-data-flow.md](./05-data-flow.md) - Detailed data flow diagrams
6. [06-api-spec.md](./06-api-spec.md) - REST and WebSocket API specification
7. [07-database.md](./07-database.md) - Database schema and queries
8. [08-frontend.md](./08-frontend.md) - React component architecture
9. [09-heuristic-orchestration.md](./09-heuristic-orchestration.md) - Heuristic vs LLM decision boundaries
